rules_version = '2';
service cloud.firestore {
  match /databases/events/documents {
    
    // ==================== PUBLIC READ ACCESS ====================
    match /events/{eventId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /leaderboards/{leaderboardId} {
      allow read: if true;
      allow write: if true;
    }
    
    match /rankings/{rankingId} {
      allow read: if true;
      allow write: if true;
    }
    
    match /rankingHistory/{historyId} {
      allow read: if true;
      allow write: if true;
    }
    
    // ==================== EVENT CATEGORIES ====================
    match /eventCategories/{categoryId} {
      allow read: if true;
      allow write: if true;
    }
    
    // ==================== USER OPERATIONS ====================
    match /registrations/{registrationId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /submissions/{submissionId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /votes/{voteId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ==================== SYSTEM OPERATIONS ====================
    match /tournaments/{tournamentId} {
      allow read: if true;
      allow write: if true;
    }
    
    match /matches/{matchId} {
      allow read: if true;
      allow write: if true;
    }
    
    match /eventAnalytics/{eventId} {
      allow read: if true;
      allow write: if true;
    }
    
    match /engagementMetrics/{metricId} {
      allow read: if true;
      allow write: if true;
    }
    
    match /performanceStats/{statId} {
      allow read: if true;
      allow write: if true;
    }
    
    // ==================== COMMUNICATION ====================
    match /announcements/{announcementId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    match /notifications/{notificationId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // ==================== ADMINISTRATION ====================
    match /reports/{reportId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    match /eventLogs/{logId} {
      allow read: if true;
      allow write: if true;
    }
    
    // ==================== CATCH-ALL ====================
    match /{document=**} {
      allow read: if true;
      allow write: if true;
    }
  }
}